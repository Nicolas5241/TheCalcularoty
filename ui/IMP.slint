import { Button, LineEdit } from "std-widgets.slint";
import { ComboInput, TwoRadioButtons } from "components.slint";

export component ImpPage inherits Rectangle {
	Image {
		source: @image-url("../assets/impedanc.jpg");
		image-fit: fill; 
		opacity: 0.3;
		width: root.width;
		height: root.height;
	}

	callback go_back;
	callback calcularot(string, string, string, int);

	in property <[string]> l-model;
	in property <[string]> c-model;
	in property <[string]> f-model;

	in property <string> impedance;
	in property <string> inductive-reactance;
	in property <string> capacitive-reactance;
	in property <string> resonant-frequency;
	
	in property <[string]> impedane-type-model;

	VerticalLayout {
		padding-top: 10px;
		padding-bottom: 10px;
		padding-left: 20px;
		padding-right: 20px;

		alignment: space-around;

		Text {
			text: "IMP Calcularoty";
			horizontal-alignment: center;
			font-size: 30px;
		}

		l-input := ComboInput {
			combobox-model: l-model;
			combo-value: "mH";
			input-type: decimal;
		}

		c-input := ComboInput {
			combobox-model: c-model;
			combo-value: "µF";
			input-type: decimal;
		}

		f-input := ComboInput {
			combobox-model: f-model;
			combo-value: "Hz";
			input-type: decimal;
		}

		circuit-type := TwoRadioButtons {
			labels: ["Série", "Paralelo"];
		}

		imp-out := ComboInput {
			input-text: impedance;
			read-only: true;
			combo-read-only: true;
			combobox-model: impedane-type-model;
		}
		
		xl-out := ComboInput {
			input-text: inductive-reactance;
			read-only: true;
			combo-read-only: true;
			combobox-model: impedane-type-model;
		}
		
		xc-out := ComboInput {
			input-text: capacitive-reactance;
			read-only: true;
			combo-read-only: true;
			combobox-model: impedane-type-model;
		}

		rf-out := ComboInput {
			input-text: resonant-frequency;
			read-only: true;
			combo-read-only: true;
			combobox-model: f-model;
		}
		
		VerticalLayout {
			spacing: 20px;
			HorizontalLayout {
				alignment: center;
				Button {
					text: "Calcularot";
					width: 150px;
					clicked => { calcularot(l-input.input-text, c-input.input-text, f-input.input-text, circuit-type.get_selected()) }
				}
			}
			HorizontalLayout {
				alignment: center;
				Button {
					text: "Escape";
					width: 150px;
					clicked => { go_back() }
				}
			}
		}
	}
}
